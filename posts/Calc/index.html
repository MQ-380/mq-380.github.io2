<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>计算几何专题练习 | Subaru</title><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="计算几何专题练习" /><meta name="author" content="Subaru" /><meta property="og:locale" content="en_US" /><meta name="description" content="计算几何专题练习" /><meta property="og:description" content="计算几何专题练习" /><link rel="canonical" href="https://mq-380.github.io/posts/Calc/" /><meta property="og:url" content="https://mq-380.github.io/posts/Calc/" /><meta property="og:site_name" content="Subaru" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2016-05-26T00:50:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="计算几何专题练习" /><meta name="twitter:site" content="@MQ380" /><meta name="twitter:creator" content="@Subaru" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"计算几何专题练习","headline":"计算几何专题练习","dateModified":"2020-03-11T23:02:29+08:00","datePublished":"2016-05-26T00:50:00+08:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://mq-380.github.io/posts/Calc/"},"url":"https://mq-380.github.io/posts/Calc/","author":{"@type":"Person","name":"Subaru"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/main.css"><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script> window.jQuery || document.write('<script src="/assets/lib/jquery-3.4.1.min.js"><\/script>'); </script> <script src="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin="anonymous" async></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha256-5+02zu5UULQkO7w1GIr6vftCgMfFdZcAHeDtFnKZsBs=" crossorigin="anonymous" async></script> <script src="/assets/js/dist/commons.js" async></script> <script src="/assets/js/dist/timeago.min.js" async></script><link rel="preload" as="style" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/syntax.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/syntax.css"><link rel="preload" as="style" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"><link rel="preload" as="script" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js"><link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css" /> <script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js" async></script> <script src="/assets/js/dist/toc.min.js" async></script> <script src="/assets/js/dist/tooltip-loader.min.js" async></script> <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/poe.jpg" alt="avatar"> </a></div><div class="profile-text mt-3"><div id="site-title"> <a href="/">Subaru</a></div><div id="site-subtitle" class="font-italic">FE Engnieer</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-3 mr-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-3 mr-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-3 mr-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-3 mr-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" light-mode-invisible></i> <i class="mode-toggle fas fa-moon" dark-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isDarkPrefer) { this.setDark(); } } else { if (this.isDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isDarkPrefer) { self.setDark(); } } else { if (self.isDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isDarkPrefer() { return this.sysDarkPrefers.matches; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if ((this.mode == null && this.isDarkPrefer) || this.mode == ModeToggle.DARK_MODE) { this.setLight(); } else { /* light mode or default-light */ this.setDark(); } } } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/mq-380" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/MQ380" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href="javascript:window.open('mailto:' + ['shmao288','gmail.com'].join('@'))"> <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" target="_blank"> <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper"> <!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>计算几何专题练习</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main"> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="progress" style=""><div class="progress-bar" id="progress" role="progressbar" style="width: 0%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div></div><div class="row" id='article_wrapper'><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>计算几何专题练习</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago" data-toggle="tooltip" data-placement="bottom" title="Thu, May 26, 2016, 12:50 AM +0800"> May 26, 2016 <i class="unloaded">2016-05-26T00:50:00+08:00</i> </span> on <a href='/categories/%E6%8A%80%E6%9C%AF/'>技术</a></div></div><div class="post-content" id='post-content'><h1 id="计算几何专题练习">计算几何专题练习</h1><p>P.S：含有数学公式。。。如没有显示麻烦刷新，谢谢。</p><p>Contents：</p><ul><li><p><a href="#1">1.基础题目</a></p><p>​ <a href="#1.1">1.1 uva11437</a></p><p>​ <a href="#1.2">1.2 uva11800</a></p><p>​ <a href="#1.3">1.3 uva11646</a></p></li><li><p><a href="#2">2.二维几何计算</a></p><p><a href="#2.1">2.1 uva11178 (EX.)</a></p><p><a href="#2.2">2.2 uva1342(EX.)</a></p><p><a href="#2.3">2.3 uva11796(EX.)</a></p></li><li><p><a href="#3">3.二维几何算法</a></p><p><a href="#3.1">3.1 uva10652(EX.)</a></p><p><a href="#3.2">3.2 uva11168(EX.)</a></p><p>​</p><p>​</p><p>​</p></li></ul><h2 id="1"> 1 基础题目</h2><h3 id="1.1"> UVA 11437</h3><p>1 本题主要运用到两个公式</p><p>求三等分点的时候需要 定比分点公式</p><p>已知三条边求三角形面积用海伦公式。。。。。（全是初高中数学- -）</p><p>附上两个公式：</p><p><strong>定比分点</strong>：O为原点，就可以求得D的坐标 <script type="math/tex">若 \overrightarrow{BD} = \lambda \overrightarrow{DC}，有\overrightarrow{OD} = \frac{\overrightarrow{OB}+\lambda \overrightarrow{OC} }{1+\lambda}</script></p><p><strong>海伦公式</strong>： <script type="math/tex">S = \sqrt{p(p-a)(p-b)(p-c)} \quad 其中 p = \frac{1}{2} (a+b+c) \quad a/b/c为三边边长</script> 2 主要思路</p><p>a 已知三点求出三个三等分点的坐标</p><p>b 利用三等分点的坐标求出之间连线的向量</p><p>c 利用向量求交点（模板）</p><p>d 交点求长度</p><p>e 求三角形面积（注意四舍五入）</p><p>3 模板（利用一点和一个向量所得的直线的参数方程求，cross为叉积）</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">Point</span> <span class="nf">crosspoint</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">af</span><span class="p">,</span><span class="n">Point</span> <span class="n">bf</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">u</span><span class="p">;</span>
    <span class="n">u</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">bf</span><span class="p">,</span><span class="n">af</span><span class="p">);</span>   <span class="c1">//求BF-AF的向量</span>
    <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>   <span class="c1">//求交点的参数</span>
    <span class="n">Point</span> <span class="n">k</span><span class="p">;</span>     <span class="c1">//交点</span>
    <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">k</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>4 代码</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">Point</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">Vector</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">void</span> <span class="n">make</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">double</span> <span class="nf">cross</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Point</span> <span class="nf">crosspoint</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">af</span><span class="p">,</span><span class="n">Point</span> <span class="n">bf</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">u</span><span class="p">;</span>
    <span class="n">u</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">bf</span><span class="p">,</span><span class="n">af</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">Point</span> <span class="n">k</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">k</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">distance</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">((</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">t</span><span class="p">;</span>
    <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">t</span><span class="p">;</span>
    <span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="n">r</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">){</span>
        <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">&gt;&gt;</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">&gt;&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">c</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="n">d</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">c</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mf">3.0</span><span class="p">;</span>
        <span class="n">d</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">c</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="mf">3.0</span><span class="p">;</span>
        <span class="n">e</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">c</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mf">3.0</span><span class="p">;</span>
        <span class="n">e</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">c</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="mf">3.0</span><span class="p">;</span>
        <span class="n">f</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mf">3.0</span><span class="p">;</span>
        <span class="n">f</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="mf">3.0</span><span class="p">;</span>
        <span class="n">Vector</span> <span class="n">AD</span><span class="p">,</span><span class="n">CF</span><span class="p">,</span><span class="n">BE</span><span class="p">;</span>
        <span class="n">AD</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">d</span><span class="p">);</span>
        <span class="n">CF</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">f</span><span class="p">);</span>
        <span class="n">BE</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">e</span><span class="p">);</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">crosspoint</span><span class="p">(</span><span class="n">AD</span><span class="p">,</span><span class="n">BE</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">crosspoint</span><span class="p">(</span><span class="n">BE</span><span class="p">,</span><span class="n">CF</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">);</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">crosspoint</span><span class="p">(</span><span class="n">AD</span><span class="p">,</span><span class="n">CF</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">c</span><span class="p">);</span>
        <span class="kt">double</span> <span class="n">RP</span><span class="p">,</span><span class="n">RQ</span><span class="p">,</span><span class="n">QP</span><span class="p">;</span>
        <span class="n">RP</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
        <span class="n">RQ</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">q</span><span class="p">);</span>
        <span class="n">QP</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
        <span class="kt">double</span> <span class="n">S</span><span class="p">,</span><span class="n">pi</span><span class="p">;</span>
        <span class="n">pi</span> <span class="o">=</span> <span class="p">(</span><span class="n">RP</span><span class="o">+</span><span class="n">RQ</span><span class="o">+</span><span class="n">QP</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
        <span class="n">S</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">pi</span><span class="o">-</span><span class="n">QP</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">pi</span><span class="o">-</span><span class="n">RQ</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">pi</span><span class="o">-</span><span class="n">RP</span><span class="p">));</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">Sans</span> <span class="o">=</span> <span class="p">((</span><span class="kt">int</span><span class="p">)(</span><span class="n">S</span><span class="o">+</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span><span class="p">;</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">Sans</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="1.2"> UVA 11800</h3><p>1 题意：</p><p>就是给4个点判断这个四边形是什么四边形。。。。</p><p>2 陷阱</p><p>四个点不一定按照逆时针或者顺时针可以ABCD标号的顺序来。。所以一开始就极角排序排定一下逆时针，排完序就可以ABCD的进行计算判断。</p><p>3 主要计算的数据</p><p>四条边和四个角。。。主要还是四个边的向量和长度。。因为浮点数的原因如果用角判断会有误差。所以用边才是坠吼的</p><p>4 几个形状判断</p><p>先判断90度。。有一个90度就进入矩形和正方形的判断。。。四条边都相等就是正方，否则是矩形。</p><p>排除了正方之后，四条边相等就是菱形。。</p><p>菱形排除完如果对边相等就是平行四边形。。。</p><p>最后的坑就是梯形。。一开始陷入了同旁内角180度。。然后高相等。。。最后才想到直接判只要有一对平行（叉乘等于零）就好了。。。真是犯蠢了。。</p><p>5 代码</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">Point</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">Vector</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">void</span> <span class="n">make</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">double</span> <span class="nf">cross</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">intimes</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">length</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="nf">crosspoint</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">af</span><span class="p">,</span><span class="n">Point</span> <span class="n">bf</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">u</span><span class="p">;</span>
    <span class="n">u</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">bf</span><span class="p">,</span><span class="n">af</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">Point</span> <span class="n">k</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">k</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">distance</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">((</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">cosangle</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">intimes</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">length</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">origin</span><span class="p">;</span>
<span class="kt">bool</span> <span class="nf">cmp</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">;</span>
    <span class="n">A</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
    <span class="n">B</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">cross</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">PTOL</span><span class="p">(</span><span class="n">Point</span> <span class="n">p</span><span class="p">,</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">;</span>
    <span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span><span class="o">/</span><span class="n">length</span><span class="p">(</span><span class="n">v1</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">t</span><span class="p">;</span>
    <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">t</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">t</span><span class="o">--</span><span class="p">){</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span> <span class="n">ref</span><span class="p">;</span>
        <span class="n">ref</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
        <span class="n">cnt</span><span class="o">++</span><span class="p">;</span>
        <span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="n">D</span><span class="p">;</span>
        <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">A</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">A</span><span class="p">.</span><span class="n">y</span><span class="o">&gt;&gt;</span><span class="n">B</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">B</span><span class="p">.</span><span class="n">y</span><span class="o">&gt;&gt;</span><span class="n">C</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">C</span><span class="p">.</span><span class="n">y</span><span class="o">&gt;&gt;</span><span class="n">D</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">D</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="n">ref</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">A</span><span class="p">);</span>
        <span class="n">ref</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">B</span><span class="p">);</span>
        <span class="n">ref</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">C</span><span class="p">);</span>
        <span class="n">ref</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">D</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">miny</span> <span class="o">=</span> <span class="mi">10000000</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">minx</span> <span class="o">=</span> <span class="mi">10000000</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">ref</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="o">&lt;</span><span class="n">miny</span><span class="p">){</span>
                <span class="n">miny</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="p">;</span>
                <span class="n">minx</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="p">;</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">ref</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span> <span class="o">==</span> <span class="n">miny</span> <span class="o">&amp;&amp;</span> <span class="n">ref</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">minx</span><span class="p">){</span>
                <span class="n">miny</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="p">;</span>
                <span class="n">minx</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="p">;</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="n">flag</span><span class="p">];</span>
        <span class="n">swap</span><span class="p">(</span><span class="n">ref</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">ref</span><span class="p">[</span><span class="n">flag</span><span class="p">]);</span>
        <span class="n">sort</span><span class="p">(</span><span class="n">ref</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">ref</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="n">cmp</span><span class="p">);</span>
        <span class="n">A</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="n">B</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="n">C</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="n">D</span> <span class="o">=</span> <span class="n">ref</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="c1">//判断90</span>
        <span class="n">Vector</span> <span class="n">AB</span><span class="p">,</span><span class="n">BC</span><span class="p">,</span><span class="n">CD</span><span class="p">,</span><span class="n">DA</span><span class="p">;</span>
        <span class="n">AB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">);</span>
        <span class="n">BC</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">);</span>
        <span class="n">CD</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">D</span><span class="p">);</span>
        <span class="n">DA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">A</span><span class="p">);</span>
        <span class="kt">double</span> <span class="n">JA</span><span class="p">,</span><span class="n">JB</span><span class="p">,</span><span class="n">JC</span><span class="p">,</span><span class="n">JD</span><span class="p">;</span>
        <span class="n">JA</span> <span class="o">=</span> <span class="n">cosangle</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span><span class="n">DA</span><span class="p">);</span>
        <span class="n">JB</span> <span class="o">=</span> <span class="n">cosangle</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span><span class="n">BC</span><span class="p">);</span>
        <span class="n">JC</span> <span class="o">=</span> <span class="n">cosangle</span><span class="p">(</span><span class="n">BC</span><span class="p">,</span><span class="n">CD</span><span class="p">);</span>
        <span class="n">JD</span> <span class="o">=</span> <span class="n">cosangle</span><span class="p">(</span><span class="n">CD</span><span class="p">,</span><span class="n">DA</span><span class="p">);</span>
        <span class="kt">double</span> <span class="n">LA</span><span class="p">,</span><span class="n">LB</span><span class="p">,</span><span class="n">LC</span><span class="p">,</span><span class="n">LD</span><span class="p">;</span>
        <span class="n">LA</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">AB</span><span class="p">);</span>
        <span class="n">LB</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">BC</span><span class="p">);</span>
        <span class="n">LC</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">CD</span><span class="p">);</span>
        <span class="n">LD</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">DA</span><span class="p">);</span>
        <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"Case "</span><span class="o">&lt;&lt;</span><span class="n">cnt</span><span class="o">&lt;&lt;</span><span class="s">": "</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">JA</span><span class="o">==</span><span class="mi">0</span> <span class="o">&amp;&amp;</span>  <span class="n">JB</span><span class="o">==</span><span class="mi">0</span> <span class="o">&amp;&amp;</span>  <span class="n">JC</span><span class="o">==</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">JD</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">LA</span><span class="o">==</span><span class="n">LB</span> <span class="o">&amp;&amp;</span> <span class="n">LB</span><span class="o">==</span><span class="n">LC</span> <span class="o">&amp;&amp;</span> <span class="n">LC</span><span class="o">==</span><span class="n">LD</span> <span class="o">&amp;&amp;</span> <span class="n">LD</span><span class="o">==</span><span class="n">LA</span><span class="p">){</span>
                <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"Square"</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"Rectangle"</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">LA</span> <span class="o">==</span> <span class="n">LB</span> <span class="o">&amp;&amp;</span> <span class="n">LB</span><span class="o">==</span><span class="n">LC</span> <span class="o">&amp;&amp;</span> <span class="n">LC</span><span class="o">==</span><span class="n">LD</span> <span class="o">&amp;&amp;</span> <span class="n">LD</span><span class="o">==</span><span class="n">LA</span><span class="p">){</span>
            <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"Rhombus"</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">LA</span><span class="o">==</span><span class="n">LC</span> <span class="o">&amp;&amp;</span> <span class="n">LB</span> <span class="o">==</span> <span class="n">LD</span><span class="p">){</span>
            <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"Parallelogram"</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span><span class="n">CD</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">cross</span><span class="p">(</span><span class="n">DA</span><span class="p">,</span><span class="n">BC</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
                <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"Trapezium"</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">"Ordinary Quadrilateral"</span><span class="o">&lt;&lt;</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="1.3"> UVA 11646</h3><p>1 题意：</p><p>造体育场，给定比例求长宽。。</p><p>2 解法：</p><p>还是缺乏高中数学知识 - -。。</p><p>已知弦长a，半径R，求弧长l的公式： <script type="math/tex">l = 2Rarcsin(\frac{a}{2R})</script></p><p>3 坑：</p><p>一如既往地只要题目简单就会卡在输入输出上。。。搞了好久。。</p><p>4 代码：</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="kt">double</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">c</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">getline</span><span class="p">(</span><span class="n">cin</span><span class="p">,</span><span class="n">c</span><span class="p">)){</span>
        <span class="n">stringstream</span> <span class="n">ss</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
        <span class="n">ss</span><span class="o">&gt;&gt;</span><span class="n">a</span><span class="p">;</span>
        <span class="n">cnt</span><span class="o">++</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">t</span><span class="p">;</span>
        <span class="n">ss</span><span class="o">&gt;&gt;</span><span class="n">t</span><span class="p">;</span>
        <span class="n">ss</span><span class="o">&gt;&gt;</span><span class="n">b</span><span class="p">;</span>
        <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">400.0</span><span class="o">/</span><span class="p">(</span><span class="mf">2.0</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">*</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="n">atan</span><span class="p">(</span><span class="n">b</span><span class="o">/</span><span class="n">a</span><span class="p">)</span><span class="o">+</span><span class="mf">2.0</span><span class="o">*</span><span class="n">a</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Case %d: %.10lf %.10lf</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">cnt</span><span class="p">,</span><span class="n">a</span><span class="o">*</span><span class="n">x</span><span class="p">,</span><span class="n">b</span><span class="o">*</span><span class="n">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="2"> 2 二维几何计算</h2><h3 id="2.1"> UVA11178</h3><p>1 题意</p><p>有一个数学定理。。。角的三等分线相交出来的一个三角形是一个等边三角形。。。</p><p>其实这道题和这个等边三角形并没有什么关系。。</p><p>2 题解</p><p>因为点来的方法都一样，所以只要写出来一个函数就ok。。。怎么求这个点呢？</p><p>先求出一个大三角形的角，然后求三分之一角度用底边旋转出来，就可以等到这条边然后再用另一边同样的方法转出来另一条线，两个相交的交点就是小三角形的一个点。。</p><p>3 模板</p><p>前面没有出现的就是怎么样旋转一个向量一定的角度得到另一个向量。。又是高中数学问题</p><p>公式就不写了。。直接给函数吧。。</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">Vector</span> <span class="nf">Rotate</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="kt">double</span> <span class="n">rad</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">),</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)};</span>
<span class="p">}</span>
</pre></table></code></div></div><p>4 代码</p><p>因为和前面几题并在一起写了。。。所以应该会有很多冗余的函数。。</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>


<span class="k">struct</span> <span class="n">Point</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="n">Vector</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">void</span> <span class="n">make</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">double</span> <span class="nf">cross</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">intimes</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">length</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="nf">crosspoint</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">af</span><span class="p">,</span><span class="n">Point</span> <span class="n">bf</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">u</span><span class="p">;</span>
    <span class="n">u</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">bf</span><span class="p">,</span><span class="n">af</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">Point</span> <span class="n">k</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">k</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">distance</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">((</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">cosangle</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">intimes</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">length</span><span class="p">(</span><span class="n">b</span><span class="p">));</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">origin</span><span class="p">;</span>
<span class="kt">bool</span> <span class="nf">cmp</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">;</span>
    <span class="n">A</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
    <span class="n">B</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">cross</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">PTOL</span><span class="p">(</span><span class="n">Point</span> <span class="n">p</span><span class="p">,</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">;</span>
    <span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span><span class="o">/</span><span class="n">length</span><span class="p">(</span><span class="n">v1</span><span class="p">));</span>
<span class="p">}</span>
<span class="c1">//将向量逆时针旋转弧度为a的角度</span>
<span class="n">Vector</span> <span class="nf">Rotate</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="kt">double</span> <span class="n">rad</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">),</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)};</span>
<span class="p">}</span>

<span class="n">Point</span> <span class="nf">GETCROSS</span><span class="p">(</span><span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">Point</span> <span class="n">B</span><span class="p">,</span><span class="n">Point</span> <span class="n">C</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">tmp</span><span class="p">;</span>
    <span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">);</span>
    <span class="n">tmp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">A</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">rad</span> <span class="o">=</span> <span class="n">acos</span><span class="p">(</span><span class="n">cosangle</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="n">v1</span><span class="p">));</span>
    <span class="n">v1</span> <span class="o">=</span> <span class="n">Rotate</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">rad</span><span class="o">/</span><span class="mf">3.0</span><span class="p">);</span>
    
    <span class="n">Vector</span> <span class="n">v2</span><span class="p">;</span>
    <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">B</span><span class="p">);</span>
    <span class="n">tmp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">A</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">rad2</span> <span class="o">=</span> <span class="n">acos</span><span class="p">(</span><span class="n">cosangle</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="n">v2</span><span class="p">));</span>
    <span class="n">v2</span> <span class="o">=</span> <span class="n">Rotate</span><span class="p">(</span><span class="n">v2</span><span class="p">,</span><span class="o">-</span><span class="n">rad2</span><span class="o">/</span><span class="mf">3.0</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">crosspoint</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">T</span><span class="p">;</span>
    <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">T</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">T</span><span class="o">--</span><span class="p">){</span>
        <span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">;</span>
        <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">A</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">A</span><span class="p">.</span><span class="n">y</span><span class="o">&gt;&gt;</span><span class="n">B</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">B</span><span class="p">.</span><span class="n">y</span><span class="o">&gt;&gt;</span><span class="n">C</span><span class="p">.</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">C</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="n">Point</span> <span class="n">D</span><span class="p">,</span><span class="n">E</span><span class="p">,</span><span class="n">F</span><span class="p">;</span>
        <span class="n">D</span> <span class="o">=</span> <span class="n">GETCROSS</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">);</span>
        <span class="n">E</span> <span class="o">=</span> <span class="n">GETCROSS</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="n">A</span><span class="p">);</span>
        <span class="n">F</span> <span class="o">=</span> <span class="n">GETCROSS</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%.6lf %.6lf %.6lf %.6lf %.6lf %.6lf</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">D</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">D</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">E</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">E</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="n">F</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">F</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</pre></table></code></div></div><h3 id="2.2"> UVA1342</h3><p>1 题意：</p><p>第一个端点和最后一个端点永远是一样重合的，一笔画划回来，问应该把这个平面变成了几块？</p><p>2 思路：</p><p>正如书上所言，要直接用死方法做算一块块会很麻烦，所以。。。又要知道一些『高级的』定理才能完成了。。。</p><p>这里是<strong>欧拉定理</strong>： <em>设平面图的顶点数、边数和面数分别为V,E,F，那么V+F-E=2</em></p><p>一条边的定义是指顶点到顶点，顶点就是所有线的交点，就算共线也算。</p><p>所以题例中给出那个图，最长的那条边其实贡献了5个顶点和4条边。。。</p><p>这个定理的证明么。。。网上找吧，这里地方太小写不下~</p><p>然后应该就容易解决了。。。</p><p>还有需要注意的就是三线共点的情况出现的话，可能会在一个集合内出现两次一样的点，就需要去重。。</p><p>3 奇技淫巧</p><p><strong><em>这个版块就用来介绍STL里一些奇怪的函数（轮子们）。。。</em></strong></p><p>unique函数。。。能够在数组或者STL容器中去重，给出的和sort差不多，不过最后一个判别函数需要给出的就是怎么判别相等。。。</p><p>（书上这里缺省了这个cmp函数。。。因为他在point这个类里定义了『==』操作符，这里就可以省。。前面的sort函数也是，定义了『&lt;』。。如果前面没定义一定要加cmp函数。。否则交上去会出现乱七八糟的CE。。。（别问我为什么知道。。。））</p><p>4 代码</p><p>（和前面一样。。。。因为有很多轮子可以用，所以可能会有很多冗余函数。。）</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;cstring&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">maxn</span> <span class="o">=</span> <span class="mi">300</span><span class="o">+</span><span class="mi">10</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">Point</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">Point</span> <span class="n">P</span><span class="p">[</span><span class="n">maxn</span><span class="p">],</span><span class="n">V</span><span class="p">[</span><span class="n">maxn</span><span class="o">*</span><span class="n">maxn</span><span class="p">];</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-10</span><span class="p">;</span>
<span class="c1">//判断符号</span>
<span class="kt">int</span> <span class="nf">dcmp</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">&lt;</span><span class="n">eps</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">return</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">Vector</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">void</span> <span class="n">make</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">double</span> <span class="nf">cross</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">intimes</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">length</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="nf">crosspoint</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">af</span><span class="p">,</span><span class="n">Point</span> <span class="n">bf</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">u</span><span class="p">;</span>
    <span class="n">u</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">bf</span><span class="p">,</span><span class="n">af</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">Point</span> <span class="n">k</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">k</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">distance</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">((</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">cosangle</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">intimes</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">length</span><span class="p">(</span><span class="n">b</span><span class="p">));</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">origin</span><span class="p">;</span>
<span class="kt">bool</span> <span class="nf">cmp</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">;</span>
    <span class="n">A</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
    <span class="n">B</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">cross</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">PTOL</span><span class="p">(</span><span class="n">Point</span> <span class="n">p</span><span class="p">,</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">;</span>
    <span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span><span class="o">/</span><span class="n">length</span><span class="p">(</span><span class="n">v1</span><span class="p">));</span>
<span class="p">}</span>
<span class="c1">//将向量逆时针旋转弧度为a的角度</span>
<span class="n">Vector</span> <span class="nf">Rotate</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="kt">double</span> <span class="n">rad</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">),</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)};</span>
<span class="p">}</span>

<span class="c1">//判断是否正规相交（不在端点初相交）</span>
<span class="kt">bool</span> <span class="nf">SegmentProperIntersection</span><span class="p">(</span><span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">Point</span> <span class="n">B</span><span class="p">,</span><span class="n">Point</span> <span class="n">C</span><span class="p">,</span><span class="n">Point</span> <span class="n">D</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">AB</span><span class="p">,</span><span class="n">AC</span><span class="p">,</span><span class="n">AD</span><span class="p">,</span><span class="n">CA</span><span class="p">,</span><span class="n">CD</span><span class="p">,</span><span class="n">CB</span><span class="p">;</span>
    <span class="n">AB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>
    <span class="n">AC</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">);</span>
    <span class="n">AD</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
    <span class="n">CA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">A</span><span class="p">);</span>
    <span class="n">CD</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
    <span class="n">CB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span> <span class="n">AC</span><span class="p">),</span><span class="n">c2</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span> <span class="n">AD</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">c3</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">CD</span><span class="p">,</span> <span class="n">CA</span><span class="p">),</span><span class="n">c4</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">CD</span><span class="p">,</span> <span class="n">CB</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span><span class="o">*</span><span class="n">dcmp</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">c3</span><span class="p">)</span><span class="o">*</span><span class="n">dcmp</span><span class="p">(</span><span class="n">c4</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//判断是否第一个点是否在后两个点的线段上</span>
<span class="kt">bool</span> <span class="nf">Onsegment</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">c</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">BA</span><span class="p">,</span><span class="n">CA</span><span class="p">;</span>
    <span class="n">BA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">CA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">BA</span><span class="p">,</span> <span class="n">CA</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">intimes</span><span class="p">(</span><span class="n">BA</span><span class="p">,</span> <span class="n">CA</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">kase</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">)</span><span class="o">!=</span><span class="n">EOF</span><span class="p">){</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">V</span><span class="p">));</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">P</span><span class="p">));</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="n">scanf</span><span class="p">(</span><span class="s">"%lf%lf"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="o">&amp;</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">);</span>
            <span class="n">V</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="n">n</span><span class="o">--</span><span class="p">;</span>  <span class="c1">//去掉最后一个点不计算</span>
        <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span><span class="n">e</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
                <span class="c1">//求每条边之间的交点</span>
                <span class="k">if</span><span class="p">(</span><span class="n">SegmentProperIntersection</span><span class="p">(</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">])){</span>
                    <span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">;</span>
                    <span class="n">a</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
                    <span class="n">b</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
                    <span class="n">V</span><span class="p">[</span><span class="n">c</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">crosspoint</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">sort</span><span class="p">(</span><span class="n">V</span><span class="p">,</span><span class="n">V</span><span class="o">+</span><span class="n">c</span><span class="p">,[](</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span> <span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">||</span> <span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">==</span><span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">&lt;</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">unique</span><span class="p">(</span><span class="n">V</span><span class="p">,</span><span class="n">V</span><span class="o">+</span><span class="n">c</span><span class="p">,[](</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span> <span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
            <span class="k">return</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">;</span>
        <span class="p">})</span><span class="o">-</span><span class="n">V</span><span class="p">);</span>  <span class="c1">//去重</span>
        <span class="c1">//求边数</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">c</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="n">Onsegment</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span> <span class="n">e</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Case %d: There are %d pieces.</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="o">++</span><span class="n">kase</span><span class="p">,</span><span class="n">e</span><span class="o">+</span><span class="mi">2</span><span class="o">-</span><span class="n">c</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="2.3"> UVA11796</h3><p>1 题意</p><p>这道题蛮复杂的。。。就是两只狗赛跑，同时出发同时到达，每只狗呢经过的点不一样。。（起点终点可能不同，在后面的数据中可以看出来）。问的是他们在跑的时候最长和最短距离是多少。</p><p>2 思路</p><p>把狗简化成A,B两个点。。</p><p>首先考虑一个『简化版』的，如果A,B均各自在一条直线上移动，那么可以想到的就是如果A一开始不动，B开始动，那么整道题就可以被简化成A点到B点移动直线上的最短最长距离。</p><p>然后再来看如果是在折线上的话，就模拟整个过程，A,B开始走，在各自经过第一个转折点之前，所有的情况都和简化版是一样的，只要根据谁先到各自的下一个转折点的时间和距离来计算最大最小距离，然后以此类推，都各自去计算在同一个时段内，大家距离下一个转折点的时候的情况。时间取出到下一个转折点快的那个，然后比较取最大最小。</p><p>3 奇技淫巧</p><p>double数的话，用printf(“%.0f”)可以四舍五入 （这道题是可以，其他地方是否可以待考）。</p><p>4 注意点</p><p>点到线段距离要考虑各种各样的情况，不能直接取垂线。</p><p>计算几何的代码很长。。注意细节</p><p>5 代码</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;cstring&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">Point</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
<span class="p">};</span>


<span class="k">const</span> <span class="kt">double</span> <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-10</span><span class="p">;</span>
<span class="c1">//判断符号</span>
<span class="kt">int</span> <span class="nf">dcmp</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">&lt;</span><span class="n">eps</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">return</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">Vector</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">make</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">};</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">double</span> <span class="nf">cross</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">intimes</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">length</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="nf">crosspoint</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">af</span><span class="p">,</span><span class="n">Point</span> <span class="n">bf</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">u</span><span class="p">;</span>
    <span class="n">u</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">bf</span><span class="p">,</span><span class="n">af</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">Point</span> <span class="n">k</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">k</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">distance</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">((</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">cosangle</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">intimes</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">length</span><span class="p">(</span><span class="n">b</span><span class="p">));</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">origin</span><span class="p">;</span>
<span class="kt">bool</span> <span class="nf">cmp</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">;</span>
    <span class="n">A</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
    <span class="n">B</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">cross</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">PTOL</span><span class="p">(</span><span class="n">Point</span> <span class="n">p</span><span class="p">,</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v3</span><span class="p">;</span>
    <span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">distance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="p">));</span>
    <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
    <span class="n">v3</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">intimes</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">v2</span><span class="p">);</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">intimes</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v3</span><span class="p">))</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">v3</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span><span class="o">/</span><span class="n">length</span><span class="p">(</span><span class="n">v1</span><span class="p">));</span>
<span class="p">}</span>
<span class="c1">//将向量逆时针旋转弧度为a的角度</span>
<span class="n">Vector</span> <span class="nf">Rotate</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="kt">double</span> <span class="n">rad</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">),</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)};</span>
<span class="p">}</span>

<span class="c1">//判断是否正规相交（不在端点初相交）</span>
<span class="kt">bool</span> <span class="nf">SegmentProperIntersection</span><span class="p">(</span><span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">Point</span> <span class="n">B</span><span class="p">,</span><span class="n">Point</span> <span class="n">C</span><span class="p">,</span><span class="n">Point</span> <span class="n">D</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">AB</span><span class="p">,</span><span class="n">AC</span><span class="p">,</span><span class="n">AD</span><span class="p">,</span><span class="n">CA</span><span class="p">,</span><span class="n">CD</span><span class="p">,</span><span class="n">CB</span><span class="p">;</span>
    <span class="n">AB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>
    <span class="n">AC</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">);</span>
    <span class="n">AD</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
    <span class="n">CA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">A</span><span class="p">);</span>
    <span class="n">CD</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
    <span class="n">CB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span> <span class="n">AC</span><span class="p">),</span><span class="n">c2</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span> <span class="n">AD</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">c3</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">CD</span><span class="p">,</span> <span class="n">CA</span><span class="p">),</span><span class="n">c4</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">CD</span><span class="p">,</span> <span class="n">CB</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span><span class="o">*</span><span class="n">dcmp</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">c3</span><span class="p">)</span><span class="o">*</span><span class="n">dcmp</span><span class="p">(</span><span class="n">c4</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//判断是否第一个点是否在后两个点的线段上</span>
<span class="kt">bool</span> <span class="nf">Onsegment</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">c</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">BA</span><span class="p">,</span><span class="n">CA</span><span class="p">;</span>
    <span class="n">BA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">CA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">BA</span><span class="p">,</span> <span class="n">CA</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">intimes</span><span class="p">(</span><span class="n">BA</span><span class="p">,</span> <span class="n">CA</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">maxn</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">T</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">;</span>
<span class="n">Point</span> <span class="n">P</span><span class="p">[</span><span class="n">maxn</span><span class="p">],</span><span class="n">Q</span><span class="p">[</span><span class="n">maxn</span><span class="p">];</span>
<span class="kt">double</span> <span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="n">Point</span> <span class="n">P</span><span class="p">,</span><span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">Point</span> <span class="n">B</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">AB</span><span class="p">,</span><span class="n">PA</span><span class="p">,</span><span class="n">PB</span><span class="p">;</span>
    <span class="n">AB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>
    <span class="n">PA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">P</span><span class="p">);</span>
    <span class="n">PB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">P</span><span class="p">);</span>
    <span class="n">Min</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="n">PTOL</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">));</span>
    <span class="n">Max</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">Max</span><span class="p">,</span><span class="n">length</span><span class="p">(</span><span class="n">PA</span><span class="p">));</span>
    <span class="n">Max</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">Max</span><span class="p">,</span><span class="n">length</span><span class="p">(</span><span class="n">PB</span><span class="p">));</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">T</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">kase</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="n">kase</span><span class="o">&lt;=</span><span class="n">T</span><span class="p">;</span><span class="n">kase</span><span class="o">++</span><span class="p">){</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">A</span><span class="p">,</span><span class="o">&amp;</span><span class="n">B</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">A</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">scanf</span><span class="p">(</span><span class="s">"%lf%lf"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="o">&amp;</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">B</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">scanf</span><span class="p">(</span><span class="s">"%lf%lf"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span><span class="o">&amp;</span><span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">);</span>
        
        <span class="kt">double</span> <span class="n">LenA</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="n">LenB</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">Vector</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">A</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span><span class="n">tmp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span><span class="n">LenA</span><span class="o">+=</span><span class="n">length</span><span class="p">(</span><span class="n">tmp</span><span class="p">);}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">B</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span><span class="n">tmp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span><span class="n">LenB</span><span class="o">+=</span><span class="n">length</span><span class="p">(</span><span class="n">tmp</span><span class="p">);}</span>
        
        <span class="kt">int</span> <span class="n">SA</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">SB</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="n">Point</span> <span class="n">Pa</span> <span class="o">=</span> <span class="n">P</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">PB</span> <span class="o">=</span> <span class="n">Q</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="mf">1e9</span><span class="p">,</span><span class="n">Max</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1e9</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">SA</span><span class="o">&lt;</span><span class="n">A</span><span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">SB</span><span class="o">&lt;</span><span class="n">B</span><span class="o">-</span><span class="mi">1</span><span class="p">){</span>
            <span class="n">Vector</span> <span class="n">tmp</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">LA</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">tmp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">Pa</span><span class="p">,</span> <span class="n">P</span><span class="p">[</span><span class="n">SA</span><span class="o">+</span><span class="mi">1</span><span class="p">]));</span>
            <span class="kt">double</span> <span class="n">LB</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">tmp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">PB</span><span class="p">,</span> <span class="n">Q</span><span class="p">[</span><span class="n">SB</span><span class="o">+</span><span class="mi">1</span><span class="p">]));</span>
            <span class="kt">double</span> <span class="n">T</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">LA</span><span class="o">/</span><span class="n">LenA</span><span class="p">,</span><span class="n">LB</span><span class="o">/</span><span class="n">LenB</span><span class="p">);</span>
            <span class="n">tmp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">Pa</span><span class="p">,</span> <span class="n">P</span><span class="p">[</span><span class="n">SA</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
            <span class="n">Vector</span> <span class="n">Va</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">tmp</span><span class="p">.</span><span class="n">x</span><span class="o">/</span><span class="n">LA</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">*</span><span class="n">LenA</span><span class="p">),</span><span class="n">tmp</span><span class="p">.</span><span class="n">y</span><span class="o">/</span><span class="n">LA</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">*</span><span class="n">LenA</span><span class="p">)};</span>
            <span class="n">tmp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">PB</span><span class="p">,</span> <span class="n">Q</span><span class="p">[</span><span class="n">SB</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
            <span class="n">Vector</span> <span class="n">Vb</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">tmp</span><span class="p">.</span><span class="n">x</span><span class="o">/</span><span class="n">LB</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">*</span><span class="n">LenB</span><span class="p">),</span><span class="n">tmp</span><span class="p">.</span><span class="n">y</span><span class="o">/</span><span class="n">LB</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">*</span><span class="n">LenB</span><span class="p">)};</span>
            <span class="n">update</span><span class="p">(</span><span class="n">Pa</span><span class="p">,</span> <span class="n">PB</span><span class="p">,</span> <span class="p">(</span><span class="n">Point</span><span class="p">){</span><span class="n">PB</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">Vb</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">Va</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">PB</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">Vb</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">Va</span><span class="p">.</span><span class="n">y</span><span class="p">});</span>  <span class="c1">//A不动，B动</span>
            <span class="n">Pa</span> <span class="o">=</span> <span class="p">(</span><span class="n">Point</span><span class="p">){</span><span class="n">Pa</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">Va</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">Pa</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">Va</span><span class="p">.</span><span class="n">y</span><span class="p">};</span>
            <span class="n">PB</span> <span class="o">=</span> <span class="p">(</span><span class="n">Point</span><span class="p">){</span><span class="n">PB</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">Vb</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">PB</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">Vb</span><span class="p">.</span><span class="n">y</span><span class="p">};</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">Pa</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">P</span><span class="p">[</span><span class="n">SA</span><span class="o">+</span><span class="mi">1</span><span class="p">].</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">Pa</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">P</span><span class="p">[</span><span class="n">SA</span><span class="o">+</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="n">SA</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">PB</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">Q</span><span class="p">[</span><span class="n">SB</span><span class="o">+</span><span class="mi">1</span><span class="p">].</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">PB</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">Q</span><span class="p">[</span><span class="n">SB</span><span class="o">+</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="n">SB</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Case %d: %.0f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">kase</span><span class="p">,</span><span class="n">Max</span><span class="o">-</span><span class="n">Min</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</pre></table></code></div></div><h2 id="3"> 3 二维几何算法</h2><h3 id="3.1"> UVA 10652</h3><p>1 题意</p><p>纯粹的求凸包，最后加一个求面积就ok。。。</p><p>2 坑</p><p>告诉你的旋转角度是角度制，要换成弧度制。。。注意要加个负号，否则会错。。。</p><p>3 代码</p><p>凸包的求法和一般的G算法不一样。。。感觉用起来比那个方便，不过他直接省略了共线的凸包点</p><p>有冗余函数</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;cstring&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">Point</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
   
<span class="p">};</span>




<span class="k">const</span> <span class="kt">double</span> <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-5</span><span class="p">;</span>
<span class="c1">//判断符号</span>
<span class="kt">int</span> <span class="nf">dcmp</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">&lt;</span><span class="n">eps</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">return</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">Vector</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">make</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">};</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="n">Point</span> <span class="k">operator</span> <span class="o">+</span> <span class="p">(</span><span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">Vector</span> <span class="n">B</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">Point</span><span class="p">){</span><span class="n">A</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">B</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">A</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">B</span><span class="p">.</span><span class="n">y</span><span class="p">};</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">Circle</span><span class="p">{</span>
    <span class="n">Point</span> <span class="n">c</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">r</span><span class="p">;</span>
<span class="c1">//    Circle();</span>
<span class="c1">//    Circle(Point c,double r):c(c),r(r){}</span>
    <span class="n">Point</span> <span class="n">point</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">){</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">Point</span><span class="p">){</span><span class="n">c</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">r</span><span class="p">};</span>
    <span class="p">}</span>
<span class="p">};</span>



<span class="kt">double</span> <span class="nf">cross</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">intimes</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">length</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="nf">crosspoint</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">af</span><span class="p">,</span><span class="n">Point</span> <span class="n">bf</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">u</span><span class="p">;</span>
    <span class="n">u</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">bf</span><span class="p">,</span><span class="n">af</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">u</span><span class="p">)</span><span class="o">/</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="n">Point</span> <span class="n">k</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="n">k</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">af</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">k</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">distance</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">((</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">cosangle</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">intimes</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">length</span><span class="p">(</span><span class="n">b</span><span class="p">));</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">origin</span><span class="p">;</span>
<span class="kt">bool</span> <span class="nf">cmp</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">;</span>
    <span class="n">A</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
    <span class="n">B</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">cross</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">PTOL</span><span class="p">(</span><span class="n">Point</span> <span class="n">p</span><span class="p">,</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">,</span><span class="n">v3</span><span class="p">;</span>
    <span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">distance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">a</span><span class="p">));</span>
    <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
    <span class="n">v3</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">p</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">intimes</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">v2</span><span class="p">);</span>
    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">intimes</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v3</span><span class="p">))</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">length</span><span class="p">(</span><span class="n">v3</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">)</span><span class="o">/</span><span class="n">length</span><span class="p">(</span><span class="n">v1</span><span class="p">));</span>
<span class="p">}</span>
<span class="c1">//将向量逆时针旋转弧度为a的角度</span>
<span class="n">Vector</span> <span class="nf">Rotate</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="kt">double</span> <span class="n">rad</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">),</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">rad</span><span class="p">)</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">rad</span><span class="p">)};</span>
<span class="p">}</span>

<span class="c1">//判断是否正规相交（不在端点初相交）</span>
<span class="kt">bool</span> <span class="nf">SegmentProperIntersection</span><span class="p">(</span><span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">Point</span> <span class="n">B</span><span class="p">,</span><span class="n">Point</span> <span class="n">C</span><span class="p">,</span><span class="n">Point</span> <span class="n">D</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">AB</span><span class="p">,</span><span class="n">AC</span><span class="p">,</span><span class="n">AD</span><span class="p">,</span><span class="n">CA</span><span class="p">,</span><span class="n">CD</span><span class="p">,</span><span class="n">CB</span><span class="p">;</span>
    <span class="n">AB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>
    <span class="n">AC</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">);</span>
    <span class="n">AD</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
    <span class="n">CA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">A</span><span class="p">);</span>
    <span class="n">CD</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
    <span class="n">CB</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span> <span class="n">AC</span><span class="p">),</span><span class="n">c2</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">AB</span><span class="p">,</span> <span class="n">AD</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">c3</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">CD</span><span class="p">,</span> <span class="n">CA</span><span class="p">),</span><span class="n">c4</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">CD</span><span class="p">,</span> <span class="n">CB</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span><span class="o">*</span><span class="n">dcmp</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">c3</span><span class="p">)</span><span class="o">*</span><span class="n">dcmp</span><span class="p">(</span><span class="n">c4</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//判断是否第一个点是否在后两个点的线段上</span>
<span class="kt">bool</span> <span class="nf">Onsegment</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">,</span><span class="n">Point</span> <span class="n">c</span><span class="p">){</span>
    <span class="n">Vector</span> <span class="n">BA</span><span class="p">,</span><span class="n">CA</span><span class="p">;</span>
    <span class="n">BA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">CA</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">BA</span><span class="p">,</span> <span class="n">CA</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dcmp</span><span class="p">(</span><span class="n">intimes</span><span class="p">(</span><span class="n">BA</span><span class="p">,</span> <span class="n">CA</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>




<span class="kt">bool</span> <span class="nf">compare</span><span class="p">(</span><span class="n">Point</span> <span class="n">p1</span><span class="p">,</span><span class="n">Point</span> <span class="n">p2</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p2</span><span class="p">.</span><span class="n">x</span> <span class="o">||</span> <span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">p1</span><span class="p">.</span><span class="n">y</span><span class="o">&lt;</span><span class="n">p2</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="mi">10000</span><span class="p">];</span>
<span class="n">Point</span> <span class="n">CH</span><span class="p">[</span><span class="mi">10000</span><span class="p">];</span>
<span class="kt">void</span> <span class="nf">cle</span><span class="p">(){</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">ToConvexHull</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ToConvexHull</span><span class="p">));</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">CH</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">CH</span><span class="p">));</span>
<span class="p">}</span>
<span class="c1">// 凸包去除了共線上的點</span>
<span class="kt">int</span> <span class="nf">ConvexHull</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">){</span>
    <span class="n">sort</span><span class="p">(</span><span class="n">ToConvexHull</span><span class="p">,</span><span class="n">ToConvexHull</span><span class="o">+</span><span class="n">n</span><span class="p">,</span><span class="n">compare</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="o">&gt;</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span> <span class="n">m</span><span class="o">--</span><span class="p">;</span>
        <span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="o">&gt;</span><span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span> <span class="n">m</span><span class="o">--</span><span class="p">;</span>
        <span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="n">m</span><span class="o">--</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">m</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">PolygonArea</span><span class="p">(</span><span class="n">Point</span> <span class="o">*</span><span class="n">p</span><span class="p">,</span><span class="kt">int</span> <span class="n">n</span><span class="p">){</span>
    <span class="kt">double</span> <span class="n">area</span> <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">area</span> <span class="o">+=</span> <span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">area</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="c1">//freopen("/Users/mouizumi/Desktop/TEXT.txt", "r", stdin);</span>
    <span class="kt">int</span> <span class="n">T</span><span class="p">;</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">T</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="n">T</span><span class="o">--</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">pc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">double</span> <span class="n">areal</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">ang</span><span class="p">;</span>
            <span class="n">scanf</span><span class="p">(</span><span class="s">"%lf%lf%lf%lf%lf"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span><span class="o">&amp;</span><span class="n">y</span><span class="p">,</span><span class="o">&amp;</span><span class="n">w</span><span class="p">,</span><span class="o">&amp;</span><span class="n">h</span><span class="p">,</span><span class="o">&amp;</span><span class="n">j</span><span class="p">);</span>
            <span class="n">Point</span> <span class="n">o</span><span class="p">;</span>
            <span class="n">o</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">o</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">;</span>
            <span class="n">ang</span> <span class="o">=</span> <span class="o">-</span><span class="n">j</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">M_PI</span><span class="p">;</span>
        
            <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">pc</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">o</span> <span class="o">+</span> <span class="n">Rotate</span><span class="p">((</span><span class="n">Vector</span><span class="p">){</span><span class="o">-</span><span class="n">w</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="n">h</span><span class="o">/</span><span class="mi">2</span><span class="p">},</span> <span class="n">ang</span><span class="p">);</span>
            <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">pc</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">o</span> <span class="o">+</span> <span class="n">Rotate</span><span class="p">((</span><span class="n">Vector</span><span class="p">){</span><span class="n">w</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="n">h</span><span class="o">/</span><span class="mi">2</span><span class="p">},</span> <span class="n">ang</span><span class="p">);</span>
            <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">pc</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">o</span> <span class="o">+</span> <span class="n">Rotate</span><span class="p">((</span><span class="n">Vector</span><span class="p">){</span><span class="o">-</span><span class="n">w</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">h</span><span class="o">/</span><span class="mi">2</span><span class="p">},</span> <span class="n">ang</span><span class="p">);</span>
            <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">pc</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">o</span> <span class="o">+</span> <span class="n">Rotate</span><span class="p">((</span><span class="n">Vector</span><span class="p">){</span><span class="n">w</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">h</span><span class="o">/</span><span class="mi">2</span><span class="p">},</span> <span class="n">ang</span><span class="p">);</span>
            <span class="n">areal</span> <span class="o">+=</span> <span class="n">w</span><span class="o">*</span><span class="n">h</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">ConvexHull</span><span class="p">(</span><span class="n">pc</span><span class="p">);</span>
        <span class="kt">double</span> <span class="n">area2</span> <span class="o">=</span> <span class="n">PolygonArea</span><span class="p">(</span><span class="n">CH</span><span class="p">,</span><span class="n">m</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%.1lf %%</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">areal</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="n">area2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</pre></table></code></div></div><h3 id="3.2"> UVA 11168</h3><p>1 题意</p><p>抛开现象看本质就是有一些点，求一条直线，让所有的点在这一条直线的一侧，然后所有点到这条线的距离之和最小，输出的数据是平均距离。</p><p>2 解法</p><p>用所给的点求一个凸包，然后可以得到凸包，要求这条直线，为了让直线在这个凸包的一侧距离又最小，不妨就让这条直线就是凸包的一条边。</p><p>枚举所有的边，并且去求所有点距离这条边的距离，取小的。</p><p><strong>如果只有2个点，那么他们的最小距离直接就是0，因为无法求凸包！</strong></p><p>3 技巧</p><p>利用点到线的距离公式，可以巧妙的解决所有点到直线距离。 <script type="math/tex">Ax+By+C = 0 点(x_0,y_0),d= \frac{|Ax_0+By_0+c|}{\sqrt{A^2+B^2}}</script></p><p>因为这里所有的点都在这条直线的一侧，所以可以直接用之前就在输入的时候就预算好的x，y的和值就可以得到距离和。</p><p>两点构成的直线，化成一般式 <script type="math/tex">\frac{x-x_1}{x_2-x_1}= \frac{y-y_1}{y_2-y_1} \Rightarrow (y_2-y_1)x+(x_1-x2)y+(x_2y_1-x_1y_2) = 0</script></p><p>不妨设x的所有和为X,y的所有和为Y，n为点的个数，那么式子就可以有： <script type="math/tex">\frac{|A(X-x_1-x_2)+B(Y-y_1-y_2)+(n-2)C|}{\sqrt{A^2+B^2}}</script></p><p>4 代码</p><p>好吧好吧。。我删掉了冗余函数</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;cmath&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;cstring&gt;
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">Point</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
   
<span class="p">};</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-5</span><span class="p">;</span>
<span class="c1">//判断符号</span>
<span class="kt">int</span> <span class="nf">dcmp</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">&lt;</span><span class="n">eps</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">return</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="n">Vector</span><span class="p">{</span>
    <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">make</span><span class="p">(</span><span class="n">Point</span> <span class="n">a</span><span class="p">,</span><span class="n">Point</span> <span class="n">b</span><span class="p">){</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">Vector</span><span class="p">){</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">};</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="n">Point</span> <span class="k">operator</span> <span class="o">+</span> <span class="p">(</span><span class="n">Point</span> <span class="n">A</span><span class="p">,</span><span class="n">Vector</span> <span class="n">B</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">Point</span><span class="p">){</span><span class="n">A</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">B</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="n">A</span><span class="p">.</span><span class="n">y</span><span class="o">+</span><span class="n">B</span><span class="p">.</span><span class="n">y</span><span class="p">};</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">cross</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">intimes</span><span class="p">(</span><span class="n">Vector</span> <span class="n">a</span><span class="p">,</span><span class="n">Vector</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>


<span class="kt">bool</span> <span class="nf">compare</span><span class="p">(</span><span class="n">Point</span> <span class="n">p1</span><span class="p">,</span><span class="n">Point</span> <span class="n">p2</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="o">&lt;</span><span class="n">p2</span><span class="p">.</span><span class="n">x</span> <span class="o">||</span> <span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="o">-</span><span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">p1</span><span class="p">.</span><span class="n">y</span><span class="o">&lt;</span><span class="n">p2</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">Point</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="mi">10000</span><span class="p">];</span>
<span class="n">Point</span> <span class="n">CH</span><span class="p">[</span><span class="mi">10000</span><span class="p">];</span>
<span class="kt">void</span> <span class="nf">cle</span><span class="p">(){</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">ToConvexHull</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ToConvexHull</span><span class="p">));</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">CH</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">CH</span><span class="p">));</span>
<span class="p">}</span>
<span class="c1">// 去除了共線上的點</span>
<span class="kt">int</span> <span class="nf">ConvexHull</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">){</span>
    <span class="n">sort</span><span class="p">(</span><span class="n">ToConvexHull</span><span class="p">,</span><span class="n">ToConvexHull</span><span class="o">+</span><span class="n">n</span><span class="p">,</span><span class="n">compare</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">Vector</span> <span class="n">v1</span><span class="p">,</span><span class="n">v2</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="o">&gt;</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span> <span class="n">m</span><span class="o">--</span><span class="p">;</span>
        <span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">--</span><span class="p">){</span>
        <span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="o">&gt;</span><span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="n">cross</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">v2</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span> <span class="n">m</span><span class="o">--</span><span class="p">;</span>
        <span class="n">CH</span><span class="p">[</span><span class="n">m</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">ToConvexHull</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="n">m</span><span class="o">--</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">m</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">){</span>
    <span class="n">freopen</span><span class="p">(</span><span class="s">"/Users/mouizumi/Desktop/TEXT.txt"</span><span class="p">,</span> <span class="s">"r"</span><span class="p">,</span> <span class="n">stdin</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">T</span><span class="p">;</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">T</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">kase</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">T</span><span class="o">--</span><span class="p">){</span>
        <span class="n">cle</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">allx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">ally</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
            <span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">ToConvexHull</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">ToConvexHull</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="p">;</span>
            <span class="n">allx</span><span class="o">+=</span><span class="n">ToConvexHull</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="p">;</span>
            <span class="n">ally</span><span class="o">+=</span><span class="n">ToConvexHull</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">double</span> <span class="n">mini</span> <span class="o">=</span> <span class="mi">10000000000</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">ConvexHull</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
            <span class="n">Point</span> <span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">;</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">CH</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">CH</span><span class="p">[(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="n">m</span><span class="p">];</span>
            <span class="kt">double</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">;</span>
            <span class="n">A</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">B</span> <span class="o">=</span> <span class="n">e</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">f</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">C</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">e</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">f</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="kt">double</span> <span class="n">Q</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">A</span><span class="o">*</span><span class="n">A</span><span class="o">+</span><span class="n">B</span><span class="o">*</span><span class="n">B</span><span class="p">);</span>
            <span class="kt">double</span> <span class="n">dis</span> <span class="o">=</span> <span class="n">fabs</span><span class="p">((</span><span class="n">A</span><span class="o">*</span><span class="p">(</span><span class="n">allx</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">f</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="n">B</span><span class="o">*</span><span class="p">(</span><span class="n">ally</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">f</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">+</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">C</span><span class="p">))</span><span class="o">/</span><span class="n">Q</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">dcmp</span><span class="p">(</span><span class="n">dis</span> <span class="o">-</span> <span class="n">mini</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="n">mini</span> <span class="o">=</span> <span class="n">dis</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span><span class="p">{</span>
            <span class="n">mini</span> <span class="o">=</span> <span class="mf">0.00</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Case #%d: %.3lf</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="o">++</span><span class="n">kase</span><span class="p">,</span><span class="n">mini</span><span class="o">/</span><span class="n">n</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>


</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted" id="post-tail-wrapper"><div> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="top" title="Wed, Mar 11, 2020, 11:02 PM +0800"> Mar 11, 2020 <i class="unloaded">2020-03-11T23:02:29+08:00</i> </span></div><div class="pt-3"> <a href="/tags/%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95/" class="post-tag no-text-decoration" >计算几何</a> <a href="/tags/%E7%AE%97%E6%B3%95/" class="post-tag no-text-decoration" >算法</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center pt-5 pb-2"><div class="license-wrapper"> <span class="license-text ml-1 mr-1"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 <i class="fab fa-creative-commons"></i> <i class="fab fa-creative-commons-by"></i> </a> </span></div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label ml-1 mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=计算几何专题练习 - Subaru&url=https://mq-380.github.io/posts/Calc/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=计算几何专题练习 - Subaru&u=https://mq-380.github.io/posts/Calc/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=计算几何专题练习 - Subaru&url=https://mq-380.github.io/posts/Calc/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/birthday/">无题杂谈</a></li><li><a href="/posts/chinese/">赫逊河畔徜徉的中国史(1)</a></li><li><a href="/posts/KMT/">精诚团结，人民做主</a></li><li><a href="/posts/os2/">操作系统复习（二） 线程</a></li><li><a href="/posts/career/">秋招小结</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <!-- The trending tags list v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung MIT Licensed --> <a class="post-tag" href="/tags/图/">图</a> <a class="post-tag" href="/tags/新年/">新年</a> <a class="post-tag" href="/tags/年终/">年终</a> <a class="post-tag" href="/tags/历史/">历史</a> <a class="post-tag" href="/tags/近代中国/">近代中国</a> <a class="post-tag" href="/tags/读书/">读书</a> <a class="post-tag" href="/tags/树/">树</a> <a class="post-tag" href="/tags/操作系统/">操作系统</a> <a class="post-tag" href="/tags/前端/">前端</a> <a class="post-tag" href="/tags/其他/">其他</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-3">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="post-extend-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/algorithm/" class="btn btn-outline-primary"><p>算法导论</p></a> <a href="/posts/saygoodbye/" class="btn btn-outline-primary"><p>诀别</p></a></div><!-- The related posts of current post. Placed in the bottom of every single post. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-4 mb-2 mb-sm-4 pb-2"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/algorithm/"><div class="card-body"> <span class="timeago small"> Feb 15, 2016 <i class="unloaded">2016-02-15T04:21:36+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>算法导论</h3><div class="text-muted small"><p>本文中含有数学公式，若无法显示请刷新重试，谢谢~ Lesson 1 插入排序 1 插入排序的基本原理（递增排序） 取当前元素往前序寻找。依序比较，若前一元素比当前大，则被比较元素往后移动一位；以此类推，直至找到第一个比其小的元素，则停止寻找，这个位置的后一个就是应该放的位置。 2 插入排序的C++实现 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 v...</p></div></div></a></div><div class="card"> <a href="/posts/link/"><div class="card-body"> <span class="timeago small"> Apr 22, 2017 <i class="unloaded">2017-04-22T00:01:36+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>基础算法与数据结构（一） 链表</h3><div class="text-muted small"><p>本部分内容一般选用C++，如有Java代码，将有明确标注。 链表的基础数据结构 1 2 3 4 5 6 7 8 struct ListNode{ int val; //may be the other data type ListNode* next; ListNode(int val){ this.val = val; this.next = n...</p></div></div></a></div><div class="card"> <a href="/posts/algotree/"><div class="card-body"> <span class="timeago small"> Apr 22, 2017 <i class="unloaded">2017-04-22T00:03:36+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>基础算法与数据结构（二） 树（1）基础二叉树</h3><div class="text-muted small"><p>树的基本数据结构 1 2 3 4 5 6 7 8 9 10 11 12 //tree struct normalTreeNode { int val; TreeNode* sons[]; }; //binary tree struct TreeNode { int val; TreeNode *left; TreeNode...</p></div></div></a></div></div></div></div></div></div><script> document.addEventListener('scroll', function(){ let wrapperHeight = $('#post-wrapper').height() - $('#post-tail-wrapper').height(); let nowPosition = $(document).scrollTop(); let now = wrapperHeight !== 0 ? nowPosition / wrapperHeight : 0; $('#progress').attr('style', `width: ${(now * 100)}%`); }); </script> <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const observer = lozad(); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://twitter.com/mq380">MAO</a>. <span data-toggle="tooltip" data-placement="top" title="The blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with theme <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a>.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted">Trending Tags</h4><!-- The trending tags list v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung MIT Licensed --> <a class="post-tag" href="/tags/图/">图</a> <a class="post-tag" href="/tags/新年/">新年</a> <a class="post-tag" href="/tags/年终/">年终</a> <a class="post-tag" href="/tags/历史/">历史</a> <a class="post-tag" href="/tags/近代中国/">近代中国</a> <a class="post-tag" href="/tags/读书/">读书</a> <a class="post-tag" href="/tags/树/">树</a> <a class="post-tag" href="/tags/操作系统/">操作系统</a> <a class="post-tag" href="/tags/前端/">前端</a> <a class="post-tag" href="/tags/其他/">其他</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', '', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js" integrity="sha256-qcLR00zq6pJk4je3MLgAri8Nn+ZumUlXgTKR2H/xCY0=" crossorigin="anonymous"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://mq-380.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
